DROP TABLE greeting IF EXISTS;

CREATE TABLE greeting (
	id BIGINT GENERATED BY DEFAULT AS IDENTITY ( START WITH 1, INCREMENT BY 1 ) NOT NULL,
	text VARCHAR(100) NOT NULL,
	PRIMARY KEY (id)
);

DROP TABLE account_role IF EXISTS;
DROP TABLE account IF EXISTS;
DROP TABLE role IF EXISTS;

CREATE TABLE account (
	id BIGINT GENERATED BY DEFAULT AS IDENTITY ( START WITH 1, INCREMENT BY 1 ) NOT NULL,
	username VARCHAR(100) NOT NULL,
	password VARCHAR(200) NOT NULL,
	enabled BOOLEAN DEFAULT true NOT NULL,
	credentialExpired BOOLEAN DEFAULT false NOT NULL,
	expired BOOLEAN DEFAULT false NOT NULL,
	locked BOOLEAN DEFAULT false NOT NULL,
	PRIMARY KEY(id),
	CONSTRAINT UQ_Account_Username UNIQUE (username)
);

CREATE TABLE role (
	id BIGINT NOT NULL,
	code VARCHAR(100) NOT NULL,
	label VARCHAR(100) NOT NULL,
	PRIMARY KEY(id),
	CONSTRAINT UQ_Role_Code UNIQUE (code)
);

CREATE TABLE account_role (
	account_Id BIGINT NOT NULL,
	role_Id BIGINT NOT NULL,
	PRIMARY KEY(account_Id, role_Id),
	CONSTRAINT FK_AccountRole_AccountId FOREIGN KEY (account_Id) REFERENCES account(id),
	CONSTRAINT FK_AccountRole_RoleId FOREIGN KEY (role_Id) REFERENCES role(id)
);
